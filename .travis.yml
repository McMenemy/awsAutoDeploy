language: go
go:
- master
services:
- docker
install:
- go get ./api/vendor/database
- go get ./api
script:
- cd ./api
- go test
after_success:
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- docker build ./api -t mcmenemy/aws-auto-deploy-api:latest
- docker push mcmenemy/aws-auto-deploy-api:latest
- docker build ./frontend -t mcmenemy/aws-auto-deploy-frontend:latest
- docker push mcmenemy/aws-auto-deploy-frontend:latest
- docker build ./db -t mcmenemy/aws-auto-deploy-db:latest
- docker push mcmenemy/aws-auto-deploy-db:latest
env:
  global:
    DOCKER_EMAIL:
    - secure: FzRToqt6BsD5SZMSVs354UUrTXaO/pJpxwCOLj1YczEraruSQTelw5zY6ejdt3aX3TTsDXXujLY9lj9QbKsHR71kfCmCQxwmKAGmGT9Vn0oVim0Qjjxq/wiO6yTxCp7X4aZ5kA3tSzaYaaeOfVwlnvgpt528ojZEnt59DGGOg2ut8cG3cpaGUXMcgmnthxxDqnYJlKznB/e6bbdCRmBZYm7ZwiDp/COI3HUgOcfSYDrxm5pffCS4lMF2PuSEbll3Jq/bUkGoYZGrFH9+Z8r3Fd81oBj7qEHbXk6nGbX2KSTQGQm6NUmudsFOusuf0+CD4kXjhz5/FCsNLBMQRkZAI0DqAhJ50kQcm7nH8ndDR8IBu6unYLXEKc5WeclnQmhQlQRQwKE4YSM69gamrXX6fUAYgUXlk9FfGjDJ4EGtF2o3tzO0MpeBT095kRE10vmd7D0qlyu1/HsIUsFpg6NopymOw9CdUu8VcCxiGph7KZAIyvOvHFFBJuVIiixSMl7kWR/996RrrIGiqIuNnVs8RmoLskqvd4fPzPNvsFaQlu/xIS9KflEXOwAO/HK6yKzc7AKpT+RnxF1WkSW5dxjHKV+NAgx9OCPpl9olKYEy8m7lzmm83+xP8GGrl0VFFYo4Ho2PRyZ9OUTWkOXljUJiy6twJSDwIXEl3qzjBtFoSb0=
    DOCKER_USER:
    - secure: bx0EZE1oRHsCHciguvhFJ7tcGAOArfEjKt2KeQdNms9V42RZqRmJuFl2xe8LG/A597F8xB6bMf9VBJbc9Vdjt2M8rfFsL9VPP4KV2Oe1wq0HKDCwkyWOMkvgHmNdyCNO4HzMdEkaVpYMjaSmS5lsY/trJ96lgNxZTVWrngsJIl/Oi1n9BMIZFFQdNUkz2gaW76wzNZxtBM2RJ92eY0m7zaC7DSxA5Vr6X7xQFuV+RPdIcDm8bWbdV5z3xEJzW1HaUEZQGvEPDamaZnUeMUdN9eEJx9ucXfKqLR+t5Ey01t+/NHYNXN3SBvWh2xpbqACeRhQZ7UvkWR2aDBOkpYvWu3rJd2V+LfobCBTp8lKhKRBWyAyR28C0rZ26ENxkICiFpLmV5iwExodccDlBV5cfUdtbwPSa3/UpZZhaYnK3ypoTtpntnYE39nMwh0dt5ArrpgdF8wYrXLnbZMYI/X+NDCVInfwGwzn7xbp9Qe2KG7jWXmCVwVQgykNYXNOVdQEtV2BffLJAFhP2fBwgd5S3F7wmRFRXFDCK+YgtDTwh/8ouBQNcquto/DbDGkdK2TZ/2nrY7bGhrs6I1/0S/IYF7ZCtf3BC+d7fbe8nRR6hg5FCBBHe0+GokcPbITBA//Nd5jjpZsePqmyH+FCGzP6EK+PxcXzyguOnFFnCyqtR3Q0=
    DOCKER_PASS:
      secure: fkFvy9zxmmkqvBwaIIzeUM/qY0jzRx8aRUWeaZ9wqBLFw5RTwMcPGHWrCkUb6Bl2Ytw7MNdK37mIkU2O3qJb3CLaXnx1ynuC+7K1Eh9MaxoShnmeKAghv8pnnE16C3RoOUrI2ID/Zj2vdDRafXs6KVQvKPx5pstmbdnVm9HfFqqTXBfisI0I+ohPFpzew8JyesRrgc+dtUp3DFUvUu2uXjhpp2AFp3HFGJ/hUCw490FQ8qSHMiTm8vOlaFCQfYItfVZfVjtagyJO78hUQuiDDU4V7wwzhrkuKENzPukIi/NkRAbvOq+kLUNpOuyoxaQt8yUnAIuVl4LERoG5x3sV9Ws+WjXBVi5rgZ7AmBZgmqA/zO1FwtHodH/2fTDfmll3X0bGVVi9QbVMKm6BRmJ+yLxImxhQMkRjFiuRJmUPxbTvnvi99f+3dyPJfsXhlsUgy6SWwbXexMl4dcadD5qR8rI+gc93ClNNDvknl4On24FnWC1XEv81BD4AW0ThhLiCgyvPtMhaa6YvnwoRBDo7oJqqWqjPuNGiH5j0vDoWkn+4u1JuxJUAM2CHzyU8nds2RxJTM73rGG12Qv9joiWID8wyCU5d7LTllKYa0x4yAoXUnZJ4Od1GDsK6Mm86VjCzlo5ZCeu/UG2xHtppwX5OOKQyYtTFLMrvMvChT9zaHg0=
